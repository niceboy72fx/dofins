import * as React from "react";
import anychart from 'anychart';
const data = [
  ["2024-01-01", 142.19, 143.86, 141.73, 143.01, 15000],
  ["2024-01-02", 142.50, 144.15, 142.00, 143.69, 18000],
  ["2024-01-03", 143.20, 144.95, 142.70, 144.30, 22000],
  ["2024-01-04", 144.10, 145.50, 143.60, 145.00, 24000],
  ["2024-01-05", 145.20, 146.30, 144.70, 145.90, 21000],
  ["2024-01-06", 146.00, 147.00, 145.50, 146.50, 25000],
  ["2024-01-07", 146.70, 147.80, 146.00, 147.50, 26000],
  ["2024-01-08", 147.60, 148.50, 147.00, 148.20, 23000],
  ["2024-01-09", 148.30, 149.20, 147.80, 148.90, 27000],
  ["2024-01-10", 148.80, 149.90, 148.30, 149.50, 28000],
  ["2024-01-11", 149.60, 150.50, 149.00, 150.20, 29000],
  ["2024-01-12", 150.30, 151.10, 149.80, 150.90, 30000],
  ["2024-01-13", 150.80, 151.70, 150.30, 151.50, 31000],
  ["2024-01-14", 151.60, 152.40, 151.00, 152.20, 32000],
  ["2024-01-15", 152.30, 153.10, 151.80, 152.90, 33000],
  ["2024-01-16", 152.80, 153.60, 152.30, 153.40, 34000],
  ["2024-01-17", 153.50, 154.30, 153.00, 154.10, 35000],
  ["2024-01-18", 154.20, 155.00, 153.70, 154.80, 36000],
  ["2024-01-19", 154.90, 155.70, 154.40, 155.50, 37000],
  ["2024-01-20", 155.60, 156.40, 155.10, 156.20, 38000],
  ["2024-01-21", 156.30, 157.10, 155.80, 156.90, 39000],
  ["2024-01-22", 157.00, 157.80, 156.50, 157.60, 40000],
  ["2024-01-23", 157.70, 158.50, 157.20, 158.30, 41000],
  ["2024-01-24", 158.40, 159.20, 157.90, 159.00, 42000],
  ["2024-01-25", 159.10, 159.90, 158.60, 159.70, 43000],
  ["2024-01-26", 159.80, 160.60, 159.30, 160.40, 44000],
  ["2024-01-27", 160.50, 161.30, 160.00, 161.10, 45000],
  ["2024-01-28", 161.20, 162.00, 160.70, 161.80, 46000],
  ["2024-01-29", 161.90, 162.70, 161.40, 162.50, 47000],
  ["2024-01-30", 162.60, 163.40, 162.10, 163.20, 48000],
  ["2024-01-31", 163.30, 164.10, 162.80, 163.90, 49000],
  ["2024-02-01", 142.19, 143.86, 141.73, 143.01, 15000],
  ["2024-02-02", 142.50, 144.15, 142.00, 143.69, 18000],
  ["2024-02-03", 143.20, 144.95, 142.70, 144.30, 22000],
  ["2024-02-04", 144.10, 145.50, 143.60, 145.00, 24000],
  ["2024-02-05", 145.20, 146.30, 144.70, 145.90, 21000],
  ["2024-02-06", 146.00, 147.00, 145.50, 146.50, 25000],
  ["2024-02-07", 146.70, 147.80, 146.00, 147.50, 26000],
  ["2024-02-08", 147.60, 148.50, 147.00, 148.20, 23000],
  ["2024-02-09", 148.30, 149.20, 147.80, 148.90, 27000],
  ["2024-02-10", 148.80, 149.90, 148.30, 149.50, 28000],
  ["2024-02-11", 149.60, 150.50, 149.00, 150.20, 29000],
  ["2024-02-12", 150.30, 151.10, 149.80, 150.90, 30000],
  ["2024-02-13", 150.80, 151.70, 150.30, 151.50, 31000],
  ["2024-02-14", 151.60, 152.40, 151.00, 152.20, 32000],
  ["2024-02-15", 152.30, 153.10, 151.80, 152.90, 33000],
  ["2024-02-16", 152.80, 153.60, 152.30, 153.40, 34000],
  ["2024-02-17", 153.50, 154.30, 153.00, 154.10, 35000],
  ["2024-02-18", 154.20, 155.00, 153.70, 154.80, 36000],
  ["2024-02-19", 154.90, 155.70, 154.40, 155.50, 37000],
  ["2024-02-20", 155.60, 156.40, 155.10, 156.20, 38000],
  ["2024-02-21", 156.30, 157.10, 155.80, 156.90, 39000],
  ["2024-02-22", 157.00, 157.80, 156.50, 157.60, 40000],
  ["2024-02-23", 157.70, 158.50, 157.20, 158.30, 41000],
  ["2024-02-24", 158.40, 159.20, 157.90, 159.00, 42000],
  ["2024-02-25", 159.10, 159.90, 158.60, 159.70, 43000],
  ["2024-02-26", 159.80, 160.60, 159.30, 160.40, 44000],
  ["2024-02-27", 160.50, 161.30, 160.00, 161.10, 45000],
  ["2024-02-28", 161.20, 162.00, 160.70, 161.80, 46000],
];


export default function StockMarketChartTest() {
  const chartContainer = React.useRef(null);
  const handlePointMouseOver = (event) => {
    const point = event.point;
    if (point) {
      // Example of showing a tooltip
      const tooltip = anychart.ui.tooltip();
      tooltip.text(`Date: ${point.get('x')}\nOpen: ${point.get('open')}\nHigh: ${point.get('high')}\nLow: ${point.get('low')}\nClose: ${point.get('close')}`);
      tooltip.title(point.seriesName());
      tooltip.container(chart.current.container());
      tooltip.target(point);
      tooltip.draw();
    }
  };


  React.useEffect(() => {
    if (data && chartContainer.current) {
      // Create a data set
      const dataTable = anychart.data.table();
      dataTable.addData(data);

      // Create a stock chart
      const chart = anychart.stock();

      // Create the first plot for the candlestick series
      const candlestickPlot = chart.plot(0);
      candlestickPlot.candlestick(dataTable.mapAs({ open: 1, high: 2, low: 3, close: 4 }))
        .name('Candlestick');
      candlestickPlot.height('75%');

      // Create the second plot for the volume series
      const volumePlot = chart.plot(1);
      candlestickPlot.listen('pointMouseOver', handlePointMouseOver);
      volumePlot.column(dataTable.mapAs({ value: 5 }))
        .name('Volume')
        .fill('#009900 0.5') // Customize the volume bar color
        .stroke('#009900');
      volumePlot.height('25%');
      // Ensure volume plot uses a different y-scale
      const volumeScale = anychart.scales.linear();
      volumePlot.yScale(volumeScale);



      // Customize the volume y-axis
      volumePlot.yAxis().title('Volume');
      chart.scroller().enabled(true);

      // Set chart background to transparent
      chart.background().enabled(true).fill('transparent');

      // Set the container id
      chart.container(chartContainer.current);

      // Draw the chart
      chart.draw();
    }
  }, [data]);
  return (
    <div>
      <div ref={chartContainer} style={{ width: '100%', height: '700px' }}></div>
    </div>
  );


}
